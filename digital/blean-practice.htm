<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¶ˆë¦¬ì–¸ ê²€ìƒ‰ ì—”ì§„ ì—°ìŠµ</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #f8f9fa; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        h2 { color: #2c3e50; text-align: center; }
        .search-controls { background: #e9ecef; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .input-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; }
        input { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        select { padding: 10px; border-radius: 5px; font-weight: bold; background: #fff; }
        button { width: 100%; padding: 12px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        
        .result-stats { margin: 15px 0; font-size: 0.9em; color: #666; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .book-item { padding: 12px; border-bottom: 1px solid #eee; }
        .book-title { font-weight: bold; color: #333; }
        .book-tags { font-size: 0.85em; color: #007bff; margin-top: 4px; }
        mark { background-color: #ffeb3b; padding: 0 2px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ” ë¶ˆë¦¬ì–¸ ê²€ìƒ‰ ì—”ì§„ (AND, OR, NOT)</h2>
    
    <div class="search-controls">
        <div class="input-row">
            <input type="text" id="term1" placeholder="ì²« ë²ˆì§¸ í‚¤ì›Œë“œ (ì˜ˆ: ë°ì´í„°)">
            <select id="operator">
                <option value="AND">AND</option>
                <option value="OR">OR</option>
                <option value="NOT">NOT</option>
            </select>
            <input type="text" id="term2" placeholder="ë‘ ë²ˆì§¸ í‚¤ì›Œë“œ (ì˜ˆ: ë¦¬í„°ëŸ¬ì‹œ)">
        </div>
        <button onclick="runBooleanSearch()">ê²€ìƒ‰ ì‹¤í–‰</button>
    </div>

    <div id="resultArea">
        <div id="stats" class="result-stats">ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
        <div id="list"></div>
    </div>
</div>

<script>
    // 1. ìƒ˜í”Œ ë„ì„œ ë°ì´í„° (íƒœê·¸ ê¸°ë°˜ ê²€ìƒ‰)
    const libraryData = [
        { title: "ë°ì´í„° ë¦¬í„°ëŸ¬ì‹œ ê°€ì´ë“œ", tags: ["ë°ì´í„°", "ë¦¬í„°ëŸ¬ì‹œ", "êµìœ¡"] },
        { title: "ì •ë³´ ë¦¬í„°ëŸ¬ì‹œì˜ ì´í•´", tags: ["ì •ë³´", "ë¦¬í„°ëŸ¬ì‹œ", "ë¬¸í—Œì •ë³´"] },
        { title: "ë°ì´í„° ì‹œê°í™” êµê³¼ì„œ", tags: ["ë°ì´í„°", "ì‹œê°í™”", "ë””ìì¸"] },
        { title: "ë¯¸ë””ì–´ ë¦¬í„°ëŸ¬ì‹œì™€ ê°€ì§œë‰´ìŠ¤", tags: ["ë¯¸ë””ì–´", "ë¦¬í„°ëŸ¬ì‹œ", "ì •ë³´"] },
        { title: "íŒŒì´ì¬ ë°ì´í„° ë¶„ì„", tags: ["ë°ì´í„°", "íŒŒì´ì¬", "í”„ë¡œê·¸ë˜ë°"] },
        { title: "ë„ì„œê´€ ì •ë³´í•™ ê°œë¡ ", tags: ["ë„ì„œê´€", "ì •ë³´", "ë¬¸í—Œì •ë³´"] },
        { title: "ë””ì§€í„¸ ë¦¬í„°ëŸ¬ì‹œ êµìœ¡ë¡ ", tags: ["ë””ì§€í„¸", "ë¦¬í„°ëŸ¬ì‹œ", "êµìœ¡"] },
        { title: "ë¹…ë°ì´í„°ì˜ ì„¸ê³„", tags: ["ë°ì´í„°", "ë¹…ë°ì´í„°", "ê³¼í•™"] }
    ];

    function runBooleanSearch() {
        const t1 = document.getElementById('term1').value.trim().toLowerCase();
        const t2 = document.getElementById('term2').value.trim().toLowerCase();
        const op = document.getElementById('operator').value;
        const listDiv = document.getElementById('list');
        const statsDiv = document.getElementById('stats');

        if (!t1) { alert("ì²« ë²ˆì§¸ í‚¤ì›Œë“œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤."); return; }

        // 2. ë¶ˆë¦¬ì–¸ ë…¼ë¦¬ í•„í„°ë§
        const results = libraryData.filter(book => {
            const content = book.tags.join(" ").toLowerCase() + book.title.toLowerCase();
            const hasT1 = content.includes(t1);
            const hasT2 = t2 ? content.includes(t2) : false;

            if (op === "AND") return hasT1 && hasT2;
            if (op === "OR")  return hasT1 || hasT2;
            if (op === "NOT") return hasT1 && !hasT2;
            return hasT1;
        });

        // 3. ê²°ê³¼ ì¶œë ¥
        listDiv.innerHTML = "";
        statsDiv.innerHTML = `ê²€ìƒ‰ ì¡°ê±´: <b>${t1} ${op} ${t2}</b> | ê²€ìƒ‰ ê²°ê³¼: ${results.length}ê±´`;

        if (results.length === 0) {
            listDiv.innerHTML = "<p style='text-align:center; padding:20px;'>ì¼ì¹˜í•˜ëŠ” ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }

        results.forEach(book => {
            const item = document.createElement('div');
            item.className = 'book-item';
            
            // í‚¤ì›Œë“œ ê°•ì¡° í•˜ì´ë¼ì´íŠ¸
            let displayTitle = book.title;
            [t1, t2].forEach(t => {
                if(t) {
                    const reg = new RegExp(t, "gi");
                    displayTitle = displayTitle.replace(reg, match => `<mark>${match}</mark>`);
                }
            });

            item.innerHTML = `
                <div class="book-title">${displayTitle}</div>
                <div class="book-tags">íƒœê·¸: ${book.tags.join(", ")}</div>
            `;
            listDiv.appendChild(item);
        });
    }
</script>

</body>
</html>